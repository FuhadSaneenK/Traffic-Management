<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traffic Simulator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/static/styles.css">
    <script src="/static/script.js"></script>
    <script>
        function updateVehicleCounts() {
            fetch('/vehicle_counts')
                .then(response => response.json())
                .then(data => {
                    document.querySelector('.video-container:nth-child(1) .vehicle-count').innerText = `Vehicles: ${data.camera1}`;
                    document.querySelector('.video-container:nth-child(2) .vehicle-count').innerText = `Vehicles: ${data.video2}`;
                    document.querySelector('.video-container:nth-child(3) .vehicle-count').innerText = `Vehicles: ${data.video3}`;
                    document.querySelector('.video-container:nth-child(4) .vehicle-count').innerText = `Vehicles: ${data.video4}`;
                })
                .catch(error => console.error('Error fetching vehicle counts:', error));
        }

        // Update counts every 2 seconds
        setInterval(updateVehicleCounts, 2000);
    </script>
</head>
<body>
    <div class="main-container">
        <nav class="left-sidebar">
            <i class="fas fa-home"></i>
            <i class="fas fa-chart-bar"></i>
            <i class="fas fa-cog"></i>
        </nav>
        <main class="content">
            <header class="header">
                <div class="header-left">
                    <i class="fas fa-traffic-light"></i>
                    <h1>Traffic Simulator</h1>
                </div>
                <div class="header-right">
                    <span id="current-time">12:00:00</span>
                    <button class="header-button">New Simulation</button>
                </div>
            </header>
            <div class="video-grid">
                <div class="video-container">
                    <div class="video-info">
                        <span class="camera-label">Camera 1</span>
                        <span class="vehicle-count">Vehicles: 15</span>
                        <span class="time-slot">Time: 08:00 - 09:00</span>
                    </div>
                    <div class="video">
                        <img src="/video_feed1" alt="Camera 1 feed">
                    </div>
                </div>
                <div class="video-container">
                    <div class="video-info">
                        <span class="camera-label">Camera 2</span>
                        <span class="vehicle-count">Vehicles: 23</span>
                        <span class="time-slot">Time: 08:00 - 09:00</span>
                    </div>
                    <div class="video">
                        <img src="/video_feed2" alt="Camera 2 feed">
                    </div>
                </div>
                <div class="video-container">
                    <div class="video-info">
                        <span class="camera-label">Camera 2</span>
                        <span class="vehicle-count">Vehicles: 15</span>
                        <span class="time-slot">Time: 08:00 - 09:00</span>
                    </div>
                    <div class="video">
                        <img src="/video_feed3" alt="Camera 3 feed">
                    </div>
                </div>
                <div class="video-container">
                    <div class="video-info">
                        <span class="camera-label">Camera 4</span>
                        <span class="vehicle-count">Vehicles: 20</span>
                        <span class="time-slot">Time: 08:00 - 09:00</span>
                    </div>
                    <div class="video">
                        <img src="/video_feed4" alt="Camera 4 feed">
                    </div>
                </div>
            </div>
        </main>
        <aside class="right-sidebar">
            <h2>Simulation Dashboard</h2>
            <div class="stat-item">
                <h3>Average Speed</h3>
                <div class="stat-value">42 mph</div>
            </div>
            <div class="stat-item">
                <h3>Traffic Density</h3>
                <div class="stat-value">65%</div>
            </div>
            <div class="stat-item">
                <h3>Accidents</h3>
                <div class="stat-value">0</div>
            </div>
            <div class="controls">
                <button class="control-btn">Start Simulation</button>
                <button class="control-btn">Pause Simulation</button>
                <button class="control-btn">Reset Simulation</button>
            </div>
        </aside>
    </div>
</body>
</html>
